#!/usr/bin/env ruby

$:.unshift(File.expand_path(File.dirname(__FILE__) + "/../lib"))

require "golem"

if ARGV.include?("-h") || ARGV.include?("--help")
  abort "golem [host=localhost [port=25565]] | proxy [host=localhost [port=25565 [listen_port=8888]]]"
end

if ARGV.first == "proxy"
  ARGV.shift
  host = ARGV.shift || "127.0.0.1"
  port = (ARGV.shift || 25565).to_i
  listen_port = (ARGV.shift || 8888).to_i
  Golem::Proxy.start("127.0.0.1", listen_port, host, port)
else
  host = ARGV.shift || "127.0.0.1"
  port = (ARGV.shift || 25565).to_i
  Golem::Session.start(host, port)
end

